import{i as P,u as R,c as q,a as L,d as N,_ as j,b as E}from"./BF-isWpa.js";import F from"./DXMjlOMh.js";import{e as A,p as S,q as H,o as l,c as b,a as t,n as o,g as r,t as g,j as w,k as D,h as m,s as T,v as O,x as G,y as M,z as U,l as J,A as K,r as Q,B as W,C as X,b as V,D as Y,d as B,w as Z}from"./DSVaGC4_.js";import{u as _,a as ee}from"./DH_sdufa.js";import"./Cpj98o6Y.js";import"./BHIaP2wn.js";const re=["type","placeholder"],ne=A({inheritAttrs:!1,__name:"UInput",props:S({variant:{default:"filled"},type:{default:"text"},label:{},placeholder:{},prependIcon:{},prependIconClass:{},prependIconSize:{},appendIcon:{},appendIconClass:{},appendIconSize:{},iconSize:{default:"20"},size:{},hint:{},error:{type:Boolean},errorMessage:{},outerClass:{},wrapperClass:{}},{modelValue:{local:!0},modelModifiers:{}}),emits:S(["click:prepend","click:prependIcon","click:append","click:appendIcon"],["update:modelValue"]),setup(h,{emit:I}){const i=I,k=P({slots:{outer:"",label:"empty:hidden text-gray-800 font-medioum tracking-wide text-sm mb-1 block focus-within:text-primary-600",inner:"flex items-center",prepend:"empty:hidden h-full flex items-center pl-3",append:"empty:hidden h-full flex items-center pr-3",icon:"text-gray-500",input:"w-full px-3 py-2 placeholder-gray-500 h-full",hint:"text-gray-500 text-xs mt-1 mb-2",error:"text-error-600 text-sm mt-1",wrapper:""},variants:{variant:{filled:{inner:"bg-white border rounded-lg focus-within:border-primary-600 focus-within:ring-1 focus-within:ring-primary-600 transition duration-200",input:"px-3 bg-transparent border-none focus:border-none focus:outline-none focus:ring-0 rounded-lg"},underline:{label:"mb-0",inner:"border-b-2 focus-within:border-primary-600 transition duration-200",input:"px-0 bg-transparent px-0 border-none focus:border-none focus:outline-none focus:ring-0"},outlined:{outer:`border rounded-lg relative
        focus-within:border-primary-600 focus-within:ring-1 focus-within:ring-primary-600
        [&:has(input:placeholder-shown)_label]:-translate-y-6 [&:has(input:placeholder-shown)_label]:bg-white [&:has(input:placeholder-shown)_label]:scale-95 [&:has(input:placeholder-shown)_label]:text-gray-800
        [&:has(input:not(:placeholder-shown))_label]:-translate-y-6 [&:has(input:not(:placeholder-shown))_label]:bg-white [&:has(input:not(:placeholder-shown))_label]:scale-95 [&:has(input:not(:placeholder-shown))_label]:text-black
        [&:has(:focus-visible)_label]:-translate-y-6 [&:has(:focus-visible)_label]:bg-white [&:has(:focus-visible)_label]:scale-95 [&:has(:focus-visible)_label]:text-black`,inner:"rounded-lg border border-transparent",input:"bg-transparent border-none focus:border-none focus:outline-none focus:ring-0",label:"absolute top-3 left-2.5 text-gray-500 pointer-events-none transition duration-200 ease-in-out px-1"}},size:{sm:{input:"text-sm h-[36px]"},md:{input:"text-sm h-[40px]"},lg:{input:"text-base h-[48px]"},auto:{input:"h-auto"}},error:{true:{outer:"",inner:"",label:"",input:""}}},defaultVariants:{variant:"filled",size:"md"},compoundSlots:[{slots:["inner"],error:!0,variant:"filled",class:"border-error-600 focus-within:border-error-600 focus-within:ring-1 focus-within:ring-error-600"},{slots:["inner"],error:!0,variant:"underline",class:"border-error-600 focus-within:border-error-600"},{slots:["outer"],error:!0,variant:"outlined",class:"border-error-600 focus-within:outline-none focus-within:border-error-600 focus-within:ring-1 focus-within:ring-error-600"}]}),{label:u,outer:x,inner:C,prepend:a,icon:d,input:$,append:z,hint:y,error:v,wrapper:n}=k({size:h.size,variant:h.variant,error:h.error}),c=H(h,"modelValue");return(e,s)=>{const p=F;return l(),b("div",{class:o([r(n)(),e.wrapperClass])},[t("div",{class:o([r(x)(),e.outerClass])},[t("label",{class:o(r(u)())},g(e.label),3),t("div",{class:o(r(C)())},[t("div",{class:o(r(a)()),onClick:s[1]||(s[1]=f=>i("click:prepend"))},[w(e.$slots,"prepend",{},()=>[e.prependIcon?(l(),D(p,{key:0,name:e.prependIcon,class:o([r(d)(),e.prependIconClass]),size:e.prependIconSize||e.iconSize,onClick:s[0]||(s[0]=f=>i("click:prependIcon"))},null,8,["name","class","size"])):m("",!0)])],2),T(t("input",G({"onUpdate:modelValue":s[2]||(s[2]=f=>c.value=f),type:e.type,placeholder:e.placeholder,class:[r($)()]},e.$attrs),null,16,re),[[O,c.value]]),t("div",{class:o(r(z)()),onClick:s[4]||(s[4]=f=>i("click:append"))},[w(e.$slots,"append",{},()=>[e.appendIcon?(l(),D(p,{key:0,name:e.appendIcon,class:o([r(d)(),e.appendIconClass]),size:e.appendIconSize||e.iconSize,onClick:s[3]||(s[3]=f=>i("click:appendIcon"))},null,8,["name","class","size"])):m("",!0)])],2)],2)],2),t("div",null,[w(e.$slots,"hint",M(U({hint:e.hint})),()=>[e.hint?(l(),b("div",{key:0,class:o([r(y)()])},g(e.hint),3)):m("",!0)]),w(e.$slots,"error",M(U({error:e.error,errorMessage:e.errorMessage})),()=>[e.error?(l(),b("div",{key:0,class:o([r(v)()])},g(e.errorMessage),3)):m("",!0)])])],2)}}}),se={class:"flex items-center justify-center h-full"},te={key:0,class:"bg-error-600 text-white text-sm px-4 py-3 rounded-lg mb-4"},oe={key:1,class:"text-error-600 text-sm mb-4"},ce=A({__name:"login",setup(h){J({title:"Login"});const{handleSubmit:I}=R({validationSchema:q({userID:L().matches(/^\d+$/,"Only numbers are allowed. Please remove any letters or special characters.").required("User ID is required").label("User ID")})}),i=_(),k=K(),u=Q(),x=W(),{store:C}=ee(),{value:a,errorMessage:d,validate:$}=N("userID",void 0,{initialValue:""}),z=X(()=>!/^\d+$/.test(a.value)),y=I(async v=>{u.value="";try{const n=await $fetch("/api/auth/login",{method:"post",body:v}),c=n.token,e=n.user;C(c,e),i.user=e,i.loggedIn=!0,k.push(x.query.next||"/admin")}catch(n){u.value=n.data.error}setTimeout(()=>{u.value=null},3500)});return(v,n)=>{const c=j,e=ne,s=E;return l(),b("div",se,[t("form",{class:"rounded-lg px-10 py-8 w-full max-w-md mx-auto",onSubmit:n[2]||(n[2]=(...p)=>r(y)&&r(y)(...p))},[V(c,{title:"Login",subtitle:"Please enter your credentials"}),r(u)?(l(),b("div",te,g(r(u)),1)):m("",!0),V(e,{modelValue:r(a),"onUpdate:modelValue":n[0]||(n[0]=p=>Y(a)?a.value=p:null),hint:"dummy: 97","wrapper-class":"mb-1",name:"userID",label:`User ID${r(a)?`: ${r(a)}`:""}`,placeholder:"Input User ID","error-message":r(d),onInput:n[1]||(n[1]=p=>r($)())},null,8,["modelValue","label","error-message"]),r(d)&&r(a)?(l(),b("div",oe,g(r(d)),1)):m("",!0),n[4]||(n[4]=t("div",{class:"mb-5 flex gap-2 justify-between items-center"},[t("label",{class:"flex gap-2 items-center text-sm"},[t("input",{type:"checkbox",class:"w-4 h-4 rounded text-primary-500 focus:ring-primary-500 transition duration-300"}),B(" Remember me ")])],-1)),V(s,{type:"submit",color:"primary",block:"",class:"mb-5",disabled:r(z)},{default:Z(()=>n[3]||(n[3]=[B(" Login ")])),_:1},8,["disabled"])],32)])}}});export{ce as default};
